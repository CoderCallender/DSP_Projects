/*
 * 		Driver for the CS4270 Audio codec from Cirrus Logic
 *
 *  	Created on: Nov 24, 2024
 *      Author: chase callender
 */


#include "codec.h"

//Function to read one register from the codec
//inputs = I2C handle (eg i2c1 or i2c2 etc), register address to be read, pointer to the data to be stored
HAL_StatusTypeDef codec_read_register(I2C_HandleTypeDef *i2c_handle, uint8_t reg_addr, uint8_t *data)
{
	return HAL_I2C_Mem_Read(i2c_handle, CODEC_I2C_ADDR, reg, I2C_MEMADD_SIZE_8BIT, data, 1, HAL_MAX_DELAY);
}

//puts the codec into a reset state via hardware pin (nrst)
void codec_hardware_reset_pin_set(void)
{
	HAL_GPIO_WritePin(CODEC_RST_GPIO_Port, CODEC_RST_Pin, 0);
}

//puts the codec into a run state via hardware pin (nrst)
void codec_hardware_reset_pin_clear(void)
{
	HAL_GPIO_WritePin(CODEC_RST_GPIO_Port, CODEC_RST_Pin, 1);
}

